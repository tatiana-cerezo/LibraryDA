<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>
<!-- Navegación principal con control de acceso por roles -->
<nav th:fragment="nav">
    <a href="/" th:text="#{nav.inicio}">Inicio</a>
    <!-- Mostrar solo si el usuario está autenticado -->
    <span sec:authorize="isAuthenticated()">
        <a href="/libros" th:text="#{nav.libros}">Libros</a>
        <a href="/prestamos" th:text="#{nav.prestamos}">Préstamos</a>
    </span>
    <a sec:authorize="hasRole('ADMIN')" href="/usuarios" th:text="#{nav.usuarios}">Usuarios</a>
    <a sec:authorize="hasRole('USER')" href="/usuarios" th:text="#{usuarios.mi.perfil}">Mi perfil</a>
    <span sec:authorize="isAuthenticated()">
        <form th:action="@{/logout}" method="post" style="display: inline;">
            <button type="submit" th:text="#{nav.logout}" style="background: none; border: none; color: white; cursor: pointer; font-size: 1rem;">Cerrar Sesión</button>
        </form>
    </span>
    <!-- Mostrar solo si el usuario no está autenticado -->
    <a sec:authorize="!isAuthenticated()" href="/login" th:text="#{nav.login}">Iniciar Sesión</a>
    <a sec:authorize="!isAuthenticated()" href="/registro" th:text="#{nav.registro}">Registrarse</a>
    <span style="margin-left: 1rem;">
        <a href="?lang=es">ES</a> |
        <a href="?lang=en">EN</a>
    </span>
</nav>
</body>
</html>